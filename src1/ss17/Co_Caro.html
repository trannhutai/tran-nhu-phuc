<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<p id="result"></p>
<script>
    let array = new Array(20);
    let flag=true;
    for (let i = 0; i < array.length; i++) {
        array[i] = new Array(20)
        for (let j = 0; j < array[i].length; j++) {
            array[i][j] = "";
        }
    }
  function disPlay(){
        let tableString='<table border="5" width="70%" style="height: 500px">'
      for (let i = 0; i <array.length ; i++) {
          tableString+='<tr>'
          for (let j = 0; j <array[i].length ; j++) {
              tableString+='<th onclick="note( ' + i + "," + j + ' )" style="height: 30px"  width="30px">'+ array[i][j]+'</th>'
          }
          tableString+='</tr>'
      }
      tableString+='</table>'
      document.getElementById("result").innerHTML=tableString;
  }
    disPlay()
    function noteWords(i,j){
        if(array[i][j]===""){
            return  true;
        }
        else{
            alert("NO!!!")
            return  false;
        }
    }
    function  note(i,j){
        if(flag===true&&noteWords(i,j)){
            array[i][j]="X"
            flag= false;
            if(win(i,j)===true){
                alert("X win")
                let cof=confirm("ban co muon choi lai hay khong?")
                for (let i = 0; i <array.length ; i++) {
                    for (let j = 0; j <array[i].length ; j++) {
                        if(cof){
                            array[i][j]=""
                        }else{
                            alert("end")
                        }
                    }
                }
            }
        }
        else if(flag===false&&noteWords(i,j)){
            array[i][j]="O";
            flag= true;
            if(win(i,j)===true){
                alert("O win")
                let cof=confirm("ban co muon choi lai hay khong?")
                for (let i = 0; i <array.length ; i++) {
                    for (let j = 0; j <array[i].length ; j++) {
                        if(cof){
                            array[i][j]=""
                        }else{
                            alert("end")
                        }
                    }
                }
            }
        }
        disPlay()
    }
    function  win(i,j){
        for (let i = 0; i <array.length ; i++) {
            for (let j = 0; j <array[i].length ; j++) {
                if(array[i][j]==="X") {
                    if (array[i][j + 1] === "X" && array[i][j + 2] === "X"&&array[i][j + 3]==="X"&&array[i][j + 4]==="X") {
                        return true;
                    }
                    if (array[i + 1][j] === "X" && array[i + 2][j] === "X"&&array[i+3][j] ==="X"&&array[i+4][j]==="X") {
                        return true;
                    }
                    if (array[i + 1][j + 1] === "X" && array[i + 2][j + 2] === "X"&&array[i+3][j + 3]==="X"&&array[i+4][j + 4]==="X") {
                        return true;
                    }
                    if (array[i + 1][j - 1] === "X" && array[i + 2][j - 2] === "X"&&array[i+3][j -3]==="X"&&array[i+4][j -4]==="X") {
                        return true;
                    }
                }
                    else if(array[i][j]==="O"){
                    if (array[i][j + 1] === "O" && array[i][j + 2] === "O"&&array[i][j + 3]==="O"&&array[i][j + 4]==="O") {
                        return true;
                    }
                    if (array[i + 1][j] === "O" && array[i + 2][j] === "O"&&array[i+3][j]==="O"&&array[i+4][j]==="O") {
                        return true;
                    }
                    if (array[i + 1][j + 1] === "O" && array[i + 2][j + 2] === "O"&&array[i+3][j + 3]==="O"&&array[i+4][j + 4]==="O") {
                        return true;
                    }
                    if (array[i + 1][j - 1] === "O" && array[i + 2][j - 2] === "O"&&array[i+3][j -3]==="O"&&array[i+4][j -4]==="O") {
                        return true;
                    }
                    }
                }
            }
        }
</script>
</body>
</html>